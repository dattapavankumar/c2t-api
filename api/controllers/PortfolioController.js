const PortfolioService = require('../services/PortfolioService');
const MongoDB = require('mongodb');
module.exports = {

    find: function (req, res) {
        var sortBy = null;
        if (req.params.sortBy) {
            sortBy = req.params.sortBy;
        };
        PortfolioService.find(req, sortBy, function (err, result) {
            if (err) {
                res.send(err);
                return;
            };
            res.send(result);
        });
    },

    findOne: function (req, res) {
        PortfolioService.findOne(req, function (err, result) {
            if (err) {
                res.send(err);
                return;
            };
            res.send(result);
        });
    },

    create: function (req, res) {
        req.body['imgUrl'] = req.file.path;
        req.body['imgData'] = new MongoDB.Binary(req.body.portfolioImage);
        
        var obj = req.body;
        PortfolioService.create(req, obj, function (err, result) {
            if (err) {
                res.send(err);
                return;
            }
            res.send(result);
        });
    },

    update: function (req, res) {
        var obj = req.body;
        PortfolioService.update(req, obj, function (err, result) {
            if (err) {
                res.send(err);
                return;
            }
            res.send(result);
        });
    },

    delete: function (req, res) {
        var obj = req.body;
        PortfolioService.delete(req, obj, function (err, result) {
            if (err) {
                res.send(err);
                return;
            }
            res.send(result);
        });
    }

}